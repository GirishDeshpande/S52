<!DOCTYPE html>

<html>
  <noscript>s52ui need JavaScript</noscript>
  
  <head>
    <title>s52ui</title>

    <meta charset="utf-8">
    
    <!-- remove the 300ms delay for touch event -->
    <meta name="viewport" content="width=device-width, user-scalable=no">
    
    <link rel="stylesheet" type="text/css" href="s52ui.css" />

    <!-- initial UI layout -->
    <script type="text/javascript" src="js/tinyjet-0.1.js">  </script>
    <script type="text/javascript" src="s52ui.js">           </script>

    <!-- WebSocket Implementation for Android Browser       -->
    <!-- via Cordova plugin infrastructure                  -->

    <!-- BUG CHROME: it choke here when run on laptop (dart2js OK - firefox)
        // cordova define "menubutton"
    <script type="text/javascript" src="js/cordova.js">       </script>
    <script type="text/javascript" src="js/cordova-2.2.0.js"> </script>
    <script type="text/javascript" src="js/cordova.js">       </script>
    <script type="text/javascript" src="js/websocket.js">     </script>
    -->

    <!-- dart code -->
    <script type="application/dart" src="s52ui.dart">                  </script>
    <script type="text/javascript"  src="packages/browser/dart.js">    </script>
    <script type="text/javascript"  src="packages/browser/interop.js"> </script>

  </head>

  <body id="mainBody">
    <script type="text/javascript">
  
      /* 
  <body id="mainBody" onkeypress='toggleUI();'>
      //document.addEventListener("keypress", toggleUI, false);
    	//document.addEventListener("deviceready", deviceReady, false);

      function deviceReady() {
        // trap event hdg here, broken with Dart in Android/WebView
        //window.addEventListener('deviceorientation', hdg, false);
        // attach event to doc (not window as is return from html) 
        //document.addEventListener("backbutton", toggleUI, false);

      	console.log("XXXXX s52ui.html:getCurrentPosition(): ..");
       	navigator.geolocation.getCurrentPosition(showPosition, geoError, {maximumAge:60000, timeout:5000, enableHighAccuracy:true});
    	}
      function showPosition(position) {
  			var latlon = "ZZZZZ s52ui.html:showPosition(): " + position.coords.latitude + "," + position.coords.longitude;
  			console.log(latlon);
	  	}
      function geoError(error) {
       	console.log('EEEEE s52ui.html:geoError(): code: '    + error.code    + ', ' + 'message: ' + error.message + '\n');
      }
      //*/
      
      /* 
      // WebSocket <--> libS52
      // FIXME: can Dart handle directly Cordova websocket on Android ?

      //var wsUri = 'ws://192.168.1.66:2950'; // laptop
      //var wsUri = 'ws://192.168.1.67:2950'; // xoom
      var wsUri = 'ws://127.0.0.1:2950';   // localhost
     
      var websocket;
      window.onload = function initWebSocket() {
      	console.log("s52ui.html:initWebSocket() - start - ");
       	websocket = new WebSocket(wsUri);
       	websocket.onclose   = function(evt) { onClose(evt)   };
       	websocket.onerror   = function(evt) { onError(evt)   };
       	websocket.onopen    = function(evt) { onOpen(evt)    };
       	
       	deviceReady();
      }

      function onOpen  (evt)   {}
      function onClose (evt)   { console.log("s52ui.html:Websock:onClose():" + evt + "<<<"); }
      function onError (evt)   { console.log("s52ui.html:Websock:onError():" + evt + "<<<"); }
      function onSend  (str)   { websocket.send(str);}
      */
      
      //function toggleUI(evt)   {}
      function toggleUI()      {}
      //function hdg     (evt)   { console.log("s52ui.html:hdg(evt):" + evt + "<<<");}
    </script>

    <p id="__beg_mainWindowComponent" hidden="true">id_beg</p>
    <p id="__end_mainWindowComponent" hidden="true">id_end</p>

  </body>

</html>


<!--
    <pre style="word-wrap: break-word; white-space: pre-wrap;"></pre>

<script>
txt = "<p>Browser CodeName:    " + window.navigator.appCodeName    + "</p>";
txt+= "<p>Browser Name:        " + window.navigator.appName        + "</p>";
txt+= "<p>Browser Version:     " + window.navigator.appVersion     + "</p>";
txt+= "<p>Cookies Enabled:     " + window.navigator.cookieEnabled  + "</p>";
txt+= "<p>Platform:            " + window.navigator.platform       + "</p>";
txt+= "<p>User-agent header:   " + window.navigator.userAgent      + "</p>";
txt+= "<p>User-agent language: " + window.navigator.systemLanguage + "</p>";

window.document.getElementById("example").innerHTML=txt;
</script>
-->


